<!DOCTYPE html>
<html>
<head>
    <title>{{ receita.titulo }} - Detalhes</title>
</head>
<body>
    <h1>{{ receita.titulo }}</h1>
    
    <p><strong>Autor:</strong> {{ receita.user.username }}</p>
    <p><strong>Criada em:</strong> {{ receita.criada_em|date:"d/m/Y H:i" }}</p>
    
    <h2>Descrição:</h2>
    <p>{{ receita.descricao }}</p>
    
    <h2>Ingredientes:</h2>
    <pre>{{ receita.ingredientes }}</pre>
    
    <h2>Modo de preparo:</h2>
    <pre>{{ receita.passos }}</pre>
    
    <hr>
    
    <h2>Comentários ({{ total_comentarios }})</h2>
    
    {% if user.is_authenticated %}
        <p><a href="{% url 'fazer_comentario' receita.id %}"><button>Comentar nesta receita</button></a></p>
    {% else %}
        <p><a href="/autenticacao/login/">Faça login</a> para comentar.</p>
    {% endif %}
    
    <hr>
    
    <div>
        {% for comentario in comentarios %}
            <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
                <strong>{{ comentario.usuario.username }}</strong> - {{ comentario.criado_em|date:"d/m/Y H:i" }}
                {% if comentario.atualizado_em != comentario.criado_em %}
                    <em>(editado em {{ comentario.atualizado_em|date:"d/m/Y H:i" }})</em>
                {% endif %}
                <div style="margin-top: 5px;">{{ comentario.texto }}</div>
            </div>
        {% empty %}
            <p>Nenhum comentário ainda. Seja o primeiro a comentar!</p>
        {% endfor %}
    </div>
    
    <hr>
    <p><a href="{% url 'listar_receitas' %}">Voltar para minhas receitas</a></p>
</body>
</html>